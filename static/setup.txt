plugin.tx_gabasics.settings {
	ua-no = {$plugin.tx_gabasics.ua-no}
	excludeParameters = {$plugin.tx_gabasics.excludeParameters}
	anonymizeIPs = {$plugin.tx_gabasics.anonymizeIPs}
	sitespeedsample = {$plugin.tx_gabasics.sitespeedsample}
	errorpid = {$plugin.tx_gabasics.errorpid}
	setdomainname = {$plugin.tx_gabasics.setdomainname}
	crossdomaintracking = {$plugin.tx_gabasics.crossdomaintracking}
	crossdomain_domainlist = {$plugin.tx_gabasics.crossdomain_domainlist}
	crossdomain_includesubdomains = {$plugin.tx_gabasics.crossdomain_includesubdomains}
	downloadtracking = {$plugin.tx_gabasics.downloadtracking}
	download_extlist = {$plugin.tx_gabasics.download_extlist}
	download_extlisttoignore = {$plugin.tx_gabasics.download_extlisttoignore}
	externallinktracking = {$plugin.tx_gabasics.externallinktracking}
}


plugin.tx_gabasics = COA
plugin.tx_gabasics {

		# Append a line break for every header tag
	5 = TEXT
	5.value (


)

		# the main Google Analytics JS-Code
	10 = TEXT
	10.value (
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	)
	10.append < .5

		# this includes the header code for creation of the ga-tracker
	20 = TEXT
	20.cObject = USER
	20.cObject.userFunc = tx_gabasics->getTrackingConfigurationCode

		# Anonymize IP?
	40 = TEXT
	40.value =  ga('set', 'anonymizeIp', true);
	40.if.isTrue = {$plugin.tx_gabasics.anonymizeIPs}
	40.append < .5

		# track the pageview if set, use the canonical url built with typolink or use the given parameter
		# from page properties
		# this gets overwritten if on error page (error event gets tracked)
	50 = TEXT
	50 {
			# first: track manually added tracking-code
		data = page:tx_gabasics_pageviewurl
			# second: if empty, track canonical url
		override.typolink.parameter.data = TSFE:id
		override.typolink.addQueryString = 1
		override.typolink.addQueryString.exclude = cHash,no_cache,type,print
		override.typolink.addQueryString.exclude.override.value = {$plugin.tx_gabasics.excludeParameters}
		override.typolink.returnLast = url
		override.if.isFalse.data = page:tx_gabasics_pageviewurl
			# only track pageview if not disabled for this page
		if.isFalse.data = page:tx_gabasics_donottrackpageview
		if.isFalse.override.data = page:tx_gabasics_disabletracking
		wrap = ga('send', 'pageview', '|');
	}
	50.append < .5

		# Allow for additional GA-Code to be put in the header, e.g. Event-Tracking etc.
	60 = TEXT
	60.data = page:tx_gabasics_additionaljscode
	60.append < .5


		# wrap everything in JS-Tags
	wrap = <script type="text/javascript"> | </script>

		# only track if not disabled
	if.isFalse.data = page:tx_gabasics_disabletracking
}

# if errorpids are set track the error-event
[PIDinRootline = {$plugin.tx_gabasics.errorpid}]
	plugin.tx_gabasics.50 >
	plugin.tx_gabasics.50 = TEXT
	plugin.tx_gabasics.50.data = getenv:HTTP_REFERER
	plugin.tx_gabasics.50.wrap = ga('send', 'event', 'Error', '|');
	plugin.tx_gabasics.50.append < plugin.tx_gabasics.5
[global]


	# activate Google Analytics in main "page." configuration
page.headerData.1342 = < plugin.tx_gabasics

	# include the JS for tracking
	
page.includeJSlibs.jquery = EXT:ga_basics/res/js/jquery-1.9.1.min.js
page.includeJSlibs.jquery.if.isTrue = {$plugin.tx_gabasics.includejQuery}
page.includeJS.xgabasics = EXT:ga_basics/res/js/main.js
page.includeJS.xgabasics.if.isTrue = {$plugin.tx_gabasics.includeJavaScript}



/**
 * add the content element for event tracking
 *
 * the event tracking code looks something like this:
 * ga('send', 'event', 'category', 'action', 'label', 'value', {'nonInteraction': 1})
 */
tt_content.gabasics_trackevent = COA
tt_content.gabasics_trackevent {
		# the category
	10 = TEXT
	10.field = header
	10.wrap = , '|'
		# the action
	20 = TEXT
	20.field = subheader
	20.wrap = , '|'
		# the label (optional)
	30 = TEXT
	30.field = bodytext
	30.wrap = , '|'
	30.required.field = bodytext
		# the value (optional)
	40 = TEXT
	40.field = titleText
	40.wrap = , '|'
	40.required.field = titleText
	40.if.isTrue.field = bodytext
		# send nonInteraction if set
	50 = TEXT
	50.value = , {'nonInteraction': 1}
	50.if.isTrue.field = imageborder

	wrap = <script>ga('send', 'event' | );</script>

	# only include tracking of events if tracking of page is not disabled (no ga code would be included and the JS would
	# throw an error)
	if.isFalse.data = page:tx_gabasics_disabletracking
}